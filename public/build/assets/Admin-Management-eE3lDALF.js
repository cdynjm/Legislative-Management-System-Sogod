import{d as Z,r as k,C as q,o as u,c as B,a as l,u as e,m as h,w as a,b as t,e as o,f as E,g as p,h as D,F as T,i as ee,t as V,j as se}from"./app-DdL1Hlyz.js";import{_ as le,K as f}from"./AppLayout.vue_vue_type_script_setup_true_lang-DWCRSrts.js";import{_ as U,a as ae,b as N,c as S,d as F,e as P,f as K}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-CQpvTc-K.js";import{_ as te,a as ne,b as $,c as x,d as oe,e as m,f as re}from"./Skeleton.vue_vue_type_script_setup_true_lang-D_NpvecW.js";import{_ as c}from"./index-BLjU3uQG.js";import{_}from"./Input.vue_vue_type_script_setup_true_lang-DXi3RWGr.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-P1GVuUrc.js";import{u as ie,a as de,C as ue}from"./Skeleton.vue_vue_type_script_setup_true_lang-CzRymHRU.js";import{L as j}from"./loader-circle-QN0r7j4p.js";import{C as me}from"./circle-user-round-ud7iGC0D.js";import{P as pe,T as fe}from"./trash-2-PliXhZwX.js";import"./NavFooter.vue_vue_type_script_setup_true_lang-B4biO6pK.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-D0o2Nd9h.js";const ce={class:"p-4 space-y-6"},_e={class:"flex w-full justify-between items-center"},ge={class:"grid gap-4 py-4"},ye={class:"grid grid-cols-4 items-center gap-4"},ve={class:"grid grid-cols-4 items-center gap-4"},xe={class:"grid grid-cols-4 items-center gap-4"},we={class:"grid gap-4 py-4"},Ae={class:"grid grid-cols-4 items-center gap-4"},be={class:"grid grid-cols-4 items-center gap-4"},Ve={class:"grid grid-cols-4 items-center gap-4"},$e={class:"text-center text-red-500 flex items-center justify-center"},Ce={class:"flex items-center gap-2"},Je=Z({__name:"Admin-Management",setup(ke){const C=ie(),L=[{title:"Admin Management",href:"/admin/admin-management"}],J=async()=>(await se.post("/public/graphql",{query:`
    query {
      admins {
        encrypted_id
        name
        email
        role
      }
    }
  `})).data.data,{isPending:R,error:qe,data:M,isFetching:Ee}=de({queryKey:["fetchAdmins"],queryFn:J}),w=k(!1);function z(){w.value=!0}const i=q({name:"",email:"",password:""}),G=()=>{i.post(route("create.admin"),{onSuccess:()=>{f.success("Admin account created successfully"),i.reset(),w.value=!1,C.invalidateQueries({queryKey:["fetchAdmins"]})},onError:()=>{f.error("Email already exists"),console.error("Error")}})},A=k(!1);function H(v,s,n){r.id=v,r.name=s,r.email=n,A.value=!0}const r=q({id:"",name:"",email:"",password:""}),I=()=>{r.patch(route("update.admin"),{onSuccess:()=>{f.success("Admin account updated successfully"),r.reset(),A.value=!1,C.invalidateQueries({queryKey:["fetchAdmins"]})},onError:()=>{f.error("Email already exists"),console.error("Error")}})},b=k(!1);function O(v){y.id=v,b.value=!0}const y=q({id:""}),W=()=>{y.delete(route("delete.admin"),{onSuccess:()=>{f.success("Admin account deleted successfully"),y.reset(),b.value=!1,C.invalidateQueries({queryKey:["fetchAdmins"]})},onError:()=>{f.error("Deletion Error"),console.error("Error")}})};return(v,s)=>(u(),B(T,null,[l(e(h),{title:"Admin Management"}),l(le,{breadcrumbs:L},{default:a(()=>[t("div",ce,[t("div",_e,[s[25]||(s[25]=t("h6",{class:"flex-1 text-md font-bold"},"Administrators",-1)),l(e(U),{open:w.value,"onUpdate:open":s[3]||(s[3]=n=>w.value=n)},{default:a(()=>[l(e(ae),{"as-child":""},{default:a(()=>[l(e(c),{onClick:z,class:"cursor-pointer"},{default:a(()=>s[9]||(s[9]=[o(" + New ")])),_:1})]),_:1}),l(e(N),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(S),null,{default:a(()=>[l(e(F),null,{default:a(()=>s[10]||(s[10]=[o("Add Admin")])),_:1}),l(e(P),null,{default:a(()=>s[11]||(s[11]=[o(" Enter details for a new admin ")])),_:1})]),_:1}),t("form",{action:"",onSubmit:E(G,["prevent"])},[t("div",ge,[t("div",ye,[l(e(g),{class:"text-right"},{default:a(()=>s[12]||(s[12]=[o("Name")])),_:1}),l(e(_),{modelValue:e(i).name,"onUpdate:modelValue":s[0]||(s[0]=n=>e(i).name=n),placeholder:"John Doe",class:"col-span-3",required:""},null,8,["modelValue"])]),t("div",ve,[l(e(g),{class:"text-right"},{default:a(()=>s[13]||(s[13]=[o("Email")])),_:1}),l(e(_),{modelValue:e(i).email,"onUpdate:modelValue":s[1]||(s[1]=n=>e(i).email=n),type:"email",placeholder:"john@example.com",class:"col-span-3",required:""},null,8,["modelValue"])]),t("div",xe,[l(e(g),{class:"text-start"},{default:a(()=>s[14]||(s[14]=[o("Password")])),_:1}),l(e(_),{modelValue:e(i).password,"onUpdate:modelValue":s[2]||(s[2]=n=>e(i).password=n),placeholder:"Password",type:"password",class:"col-span-3",required:""},null,8,["modelValue"])])]),l(e(K),null,{default:a(()=>[l(e(c),{type:"submit",class:"cursor-pointer",disabled:e(i).processing},{default:a(()=>[e(i).processing?(u(),p(e(j),{key:0,class:"h-4 w-4 animate-spin"})):D("",!0),s[15]||(s[15]=o(" Save "))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(U),{open:A.value,"onUpdate:open":s[7]||(s[7]=n=>A.value=n)},{default:a(()=>[l(e(N),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(S),null,{default:a(()=>[l(e(F),null,{default:a(()=>s[16]||(s[16]=[o("Edit Admin")])),_:1}),l(e(P),null,{default:a(()=>s[17]||(s[17]=[o(" Update details for the admin ")])),_:1})]),_:1}),t("form",{action:"",onSubmit:E(I,["prevent"])},[t("div",we,[t("div",Ae,[l(e(g),{class:"text-right"},{default:a(()=>s[18]||(s[18]=[o("Name")])),_:1}),l(e(_),{modelValue:e(r).name,"onUpdate:modelValue":s[4]||(s[4]=n=>e(r).name=n),placeholder:"John Doe",class:"col-span-3",required:""},null,8,["modelValue"])]),t("div",be,[l(e(g),{class:"text-right"},{default:a(()=>s[19]||(s[19]=[o("Email")])),_:1}),l(e(_),{modelValue:e(r).email,"onUpdate:modelValue":s[5]||(s[5]=n=>e(r).email=n),type:"email",placeholder:"john@example.com",class:"col-span-3",required:""},null,8,["modelValue"])]),t("div",Ve,[l(e(g),{class:"text-start"},{default:a(()=>s[20]||(s[20]=[o("Change Password")])),_:1}),l(e(_),{modelValue:e(r).password,"onUpdate:modelValue":s[6]||(s[6]=n=>e(r).password=n),placeholder:"Password",type:"password",class:"col-span-3"},null,8,["modelValue"])])]),l(e(K),null,{default:a(()=>[l(e(c),{type:"submit",class:"cursor-pointer",disabled:e(r).processing},{default:a(()=>[e(r).processing?(u(),p(e(j),{key:0,class:"h-4 w-4 animate-spin"})):D("",!0),s[21]||(s[21]=o(" Save"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),l(e(U),{open:b.value,"onUpdate:open":s[8]||(s[8]=n=>b.value=n)},{default:a(()=>[l(e(N),{class:"sm:max-w-[600px]"},{default:a(()=>[l(e(S),null,{default:a(()=>[l(e(F),null,{default:a(()=>s[22]||(s[22]=[o("Delete Admin")])),_:1}),l(e(P),null,{default:a(()=>s[23]||(s[23]=[o(" Are you sure you want to delete this admin? This action cannot be undone. ")])),_:1})]),_:1}),t("form",{action:"",onSubmit:E(W,["prevent"])},[l(e(K),null,{default:a(()=>[l(e(c),{type:"submit",class:"cursor-pointer",variant:"destructive",disabled:e(y).processing},{default:a(()=>[e(y).processing?(u(),p(e(j),{key:0,class:"h-4 w-4 animate-spin"})):D("",!0),s[24]||(s[24]=o(" Delete"))]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),l(e(te),null,{default:a(()=>[l(e(ne),null,{default:a(()=>[l(e($),null,{default:a(()=>[l(e(x),{class:"w-[50px]"},{default:a(()=>s[26]||(s[26]=[t("small",null,"#",-1)])),_:1}),l(e(x),null,{default:a(()=>s[27]||(s[27]=[t("small",null,"Name",-1)])),_:1}),l(e(x),null,{default:a(()=>s[28]||(s[28]=[t("small",null,"Email",-1)])),_:1}),l(e(x),null,{default:a(()=>s[29]||(s[29]=[t("small",null,"Role",-1)])),_:1}),l(e(x),{class:"text-right"},{default:a(()=>s[30]||(s[30]=[t("small",null,"Actions",-1)])),_:1})]),_:1})]),_:1}),l(e(oe),null,{default:a(()=>{var n,Q;return[e(R)?(u(),p(e($),{key:0},{default:a(()=>[l(e(m),{colspan:"5",class:"text-center"},{default:a(()=>[l(re)]),_:1})]),_:1})):((n=e(M))==null?void 0:n.admins.length)===0?(u(),p(e($),{key:1},{default:a(()=>[l(e(m),{colspan:"10"},{default:a(()=>[t("small",$e,[l(e(ue),{class:"mr-2 w-5"}),s[31]||(s[31]=o(" No Data Found "))])]),_:1})]),_:1})):(u(!0),B(T,{key:2},ee((Q=e(M))==null?void 0:Q.admins,(d,X)=>(u(),p(e($),{key:d.encrypted_id},{default:a(()=>[l(e(m),null,{default:a(()=>[t("small",null,V(X+1),1)]),_:2},1024),l(e(m),null,{default:a(()=>[t("div",Ce,[l(e(me),{class:"text-gray-500"}),t("span",null,V(d.name),1)])]),_:2},1024),l(e(m),null,{default:a(()=>[o(V(d.email),1)]),_:2},1024),l(e(m),null,{default:a(()=>[o(V(d.role==1?"Admin":""),1)]),_:2},1024),l(e(m),{class:"text-right"},{default:a(()=>[l(e(c),{variant:"link",class:"ml-2 cursor-pointer",onClick:Y=>H(d.encrypted_id,d.name,d.email)},{default:a(()=>[l(e(pe))]),_:2},1032,["onClick"]),l(e(c),{variant:"destructive",onClick:Y=>O(d.encrypted_id),class:"ml-2 cursor-pointer"},{default:a(()=>[l(e(fe))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1})])]),_:1})],64))}});export{Je as default};
