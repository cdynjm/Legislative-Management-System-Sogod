import{a as w,U as T,_ as A}from"./AppLayout.vue_vue_type_script_setup_true_lang-xyQDy4XS.js";import{d as B,o as n,c as l,a as e,u as t,m as U,w as s,b as o,e as d,g as f,t as i,h as V,F as h,i as k,n as j,j as L}from"./app-Bx2c4xmG.js";import{u as M,a as Q,C as S}from"./Skeleton.vue_vue_type_script_setup_true_lang-DMtIJeok.js";import{_ as p,a as _,b as y,c as u,d as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-CMAzF26r.js";import{_ as z,C as O,a as E}from"./SkeletonBox.vue_vue_type_script_setup_true_lang-CYUshBo_.js";import{_ as b,F as P}from"./SkeletonCard.vue_vue_type_script_setup_true_lang-CMKZGJco.js";import{_ as K}from"./index-BPd5IZG_.js";import{F as q}from"./NavFooter.vue_vue_type_script_setup_true_lang-BzXF0nLl.js";import{P as R}from"./pen-Bc5btEKt.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BWgUyTND.js";const Y={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-4"},G={class:"text-2xl font-bold"},H={class:"text-2xl font-bold"},I={class:"text-2xl font-bold"},J={class:"grid grid-cols-1 gap-4 p-4 py-0"},W={class:"mx-5"},X={class:"flex justify-center items-center gap-2 md:mb-0"},Z={key:0,class:"grid grid-cols-1 gap-4 p-4"},tt={class:"grid grid-cols-1 xl:grid-cols-3 gap-4 p-4"},et={class:"flex items-center space-x-4 rounded-md border p-4"},st=["src"],at={class:"flex-1 space-y-1"},ot={class:"text-sm font-medium leading-none"},rt={class:"text-[13px] text-muted-foreground"},nt={class:"text-[14px] font-bold text-gray-600"},it={class:"text-[14px]"},lt={class:"mb-4 grid grid-cols-[25px_minmax(0,1fr)] items-start pb-0 last:mb-0 last:pb-0"},dt={class:"space-y-1"},ut={class:"text-sm font-medium leading-none"},ct={class:"text-[12px] text-muted-foreground"},ft={class:"text-gray-500 text-[13px] flex items-center gap-2"},pt={key:0},mt={key:1},_t={class:"text-gray-500 text-[13px] flex items-center gap-2"},xt={key:0},gt={key:1},ht={class:"text-gray-500"},yt=["href"];function bt(D){const x=new Date(D),v=x.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),c=x.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${v} | ${c}`}const At=B({__name:"Dashboard",setup(D){const x=[{title:"Dashboard",href:"/user/dashboard"}];M();const v=async()=>(await L.post("/public/graphql",{query:`
        query {
            userdashboard {
                officialsCount
                categoriesCount
                filesCount
                files {
                    municipalStatus
                    provincialStatus
                    title
                    ordinanceNumber
                    finalTitle
                    file
                    updated_at
                    author {
                        name
                        photo
                        position
                    }
                    coAuthors {
                        official {
                            name
                            position
                        }
                    }
                    category {
                        category
                    }
                }
            }
        }
    `})).data.data,{isPending:c,data:m,error:vt,isFetching:wt}=Q({queryKey:["userfetchDashboard"],queryFn:v});return(g,r)=>(n(),l(h,null,[e(t(U),{title:"Dashboard"}),e(A,{breadcrumbs:x},{default:s(()=>{var $,F;return[o("div",Y,[e(w,{href:g.route("user.file-manager"),prefetch:""},{default:s(()=>[e(t(p),{class:"pt-0 shadow-none"},{default:s(()=>[e(t(_),{class:"flex items-center justify-between bg-blue-50 py-2"},{default:s(()=>[e(t(y),{class:"text-[13px]"},{default:s(()=>r[0]||(r[0]=[d("Categories")])),_:1}),e(t(q),{class:"w-5 h-5 text-muted-foreground"})]),_:1}),t(c)?(n(),f(t(u),{key:0},{default:s(()=>[e(b)]),_:1})):(n(),f(t(u),{key:1},{default:s(()=>{var a;return[o("p",G,i((a=t(m))==null?void 0:a.userdashboard.categoriesCount),1)]}),_:1}))]),_:1})]),_:1},8,["href"]),e(w,{href:g.route("user.file-manager"),prefetch:""},{default:s(()=>[e(t(p),{class:"pt-0 shadow-none"},{default:s(()=>[e(t(_),{class:"flex items-center justify-between bg-red-50 py-2"},{default:s(()=>[e(t(y),{class:"text-[13px]"},{default:s(()=>r[1]||(r[1]=[d("Files")])),_:1}),e(t(P),{class:"w-5 h-5 text-muted-foreground"})]),_:1}),t(c)?(n(),f(t(u),{key:0},{default:s(()=>[e(b)]),_:1})):(n(),f(t(u),{key:1},{default:s(()=>{var a;return[o("p",H,i((a=t(m))==null?void 0:a.userdashboard.filesCount),1)]}),_:1}))]),_:1})]),_:1},8,["href"]),e(w,{href:g.route("user.elected-officials"),prefetch:""},{default:s(()=>[e(t(p),{class:"pt-0 shadow-none"},{default:s(()=>[e(t(_),{class:"flex items-center justify-between bg-orange-50 py-2"},{default:s(()=>[e(t(y),{class:"text-[13px]"},{default:s(()=>r[2]||(r[2]=[d("Officials")])),_:1}),e(t(T),{class:"w-5 h-5 text-muted-foreground"})]),_:1}),t(c)?(n(),f(t(u),{key:0},{default:s(()=>[e(b)]),_:1})):(n(),f(t(u),{key:1},{default:s(()=>{var a;return[o("p",I,i((a=t(m))==null?void 0:a.userdashboard.officialsCount),1)]}),_:1}))]),_:1})]),_:1},8,["href"])]),o("div",J,[e(t(p),{class:"shadow-none py-2"},{default:s(()=>[o("div",W,[e(t(C),{class:"text-center font-bold md:flex items-center gap-2 justify-center md:justify-between"},{default:s(()=>[o("div",X,[e(t(q),{class:"mb-[2px] w-5 h-auto"}),r[3]||(r[3]=d(" Recent Ordinances "))]),r[4]||(r[4]=o("div",{class:"md:flex hidden"}," Municipality of Sogod ",-1))]),_:1})])]),_:1})]),(($=t(m))==null?void 0:$.userdashboard.files.length)===0&&!t(c)?(n(),l("div",Z,[e(t(p),{class:"shadow-none"},{default:s(()=>[e(t(C),{class:"text-red-500 flex items-center justify-center text-[12px] gap-2"},{default:s(()=>[e(t(S),{class:"w-5 h-auto"}),r[5]||(r[5]=d(" No Data Found "))]),_:1})]),_:1})])):V("",!0),o("div",tt,[t(c)?(n(),l(h,{key:0},k(3,a=>e(t(p),{class:"shadow-none"},{default:s(()=>[e(t(_),{class:"text-[14px]"},{default:s(()=>[e(b)]),_:1}),e(t(u),{class:"grid gap-4"},{default:s(()=>[e(z)]),_:1})]),_:1})),64)):(n(!0),l(h,{key:1},k((F=t(m))==null?void 0:F.userdashboard.files,(a,kt)=>(n(),f(t(p),{class:"shadow-none flex flex-col h-full"},{default:s(()=>[e(t(_),{class:"text-[14px]"},{default:s(()=>[e(t(y),null,{default:s(()=>r[6]||(r[6]=[d("Ordinance Number")])),_:1}),e(t(C),null,{default:s(()=>[d(i(a.ordinanceNumber!=null?a.ordinanceNumber:"-"),1)]),_:2},1024),o("div",et,[o("img",{draggable:"false",src:"/storage/profile/"+a.author.photo,class:"w-10 h-10 rounded-full object-cover"},null,8,st),o("div",at,[o("p",ot,i(a.author.name),1),o("p",rt,i(a.author.position),1)]),e(t(R),{class:"h-auto w-5"})])]),_:2},1024),e(t(u),{class:"grid gap-4"},{default:s(()=>[o("div",nt,i(a.category.category),1),o("div",null,[o("p",it,i(a.finalTitle==null?a.title:a.finalTitle),1)]),o("div",null,[r[8]||(r[8]=o("div",{class:"text-[14px] mb-4 font-bold text-blue-500"},"Co-Authors",-1)),(n(!0),l(h,null,k(a.coAuthors,(N,St)=>(n(),l("div",lt,[r[7]||(r[7]=o("span",{class:"flex h-2 w-2 translate-y-1 rounded-full bg-sky-500"},null,-1)),o("div",dt,[o("p",ut,i(N.official.name),1),o("p",ct,i(N.official.position),1)])]))),256))]),o("div",ft,[a.municipalStatus==1?(n(),l("div",pt,[e(t(S),{class:"w-5 h-5 text-red-500"})])):(n(),l("div",mt,[e(t(O),{class:"w-5 h-5 text-green-500"})])),r[9]||(r[9]=d(" Municipal Status: ")),o("span",{class:j(a.municipalStatus==1?"text-red-500":"text-green-500")},i(a.municipalStatus==1?"Draft Ordinance":"Approved Ordinance"),3)]),o("div",_t,[a.provincialStatus==null||a.provincialStatus==1?(n(),l("div",xt,[e(t(S),{class:"w-5 h-5 text-red-500"})])):(n(),l("div",gt,[e(t(O),{class:"w-5 h-5 text-green-500"})])),r[10]||(r[10]=d(" Provincial Status: ")),o("span",{class:j([a.provincialStatus==1?"text-red-500":a.provincialStatus==2?"text-green-500":"text-gray-500"])},i(a.provincialStatus==1?"Disapproved":a.provincialStatus==2?"Approved Ordinance":"No Status Yet"),3)]),o("small",ht,i(bt(a.updated_at)),1)]),_:2},1024),e(t(E),{class:"mt-auto"},{default:s(()=>[e(t(K),{class:"w-full text-[12px] cursor-pointer"},{default:s(()=>[o("a",{href:"/storage/files/"+a.file,class:"flex items-center gap-2",target:"_blank"},[e(t(P)),r[11]||(r[11]=d(" Open PDF File "))],8,yt)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))])]}),_:1})],64))}});export{At as default};
